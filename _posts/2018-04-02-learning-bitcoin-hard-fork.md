---
layout: post
title: 硬分叉有多硬？——小白学比特币之六
date: 2018-04-2
categories: blog
tags: [比特币,区块链]
description:
---

![](/img/learningbitcoin/forkcovier.jpg)

在[双重支付](/_posts/2018-03-14-learning-bitcoin-double-spending.md)的文章里提到，如果两个区块在几乎同时被确认的情况下，区块链就会发生暂时的分叉，这种情况下就会出现两条链。又由于矿工们的算力有差别，如果某条链上的算力比另外一条链上多，很快，这条链的长度也会超过另外一条链。

例如下图，第四个区块就是在几乎同时的情况下被“挖”出来了，那么这个时候出现了区块链的分叉，橙色的链和蓝色的链。这两条链上算力的差别，导致了橙色链的增长速度快过蓝色链，所以后面的矿工会把新挖出来的区块加到橙色链上，而蓝色链就会被抛弃了。最后，只有一条链能被保存下来，成为真正有效唯一账本。

![](/img/learningbitcoin/blockchainfork.jpg)

**这样情况是建立在矿工对共识机制认可基础上，对共识机制的认可保证了比特币区块链的“唯一性””。**


那如果矿工对于共识不认可，会发生什么呢？这种情况就是修改共识，修改共识有两种一个就是软分叉，一个就是硬分叉。

# 软分叉
软分叉(soft fork)，可以简单的理解为一个软件系统的升级时，有的人升级了，有的人没有升级，由于使用系统版本的不同，所导致的分叉。只要没有升级的人升级到最新系统后，这样的分叉就会消失。

具体来说，软分叉升级，主要针对比特币区块数据结构。相当于给比特币系统修bug，打补丁。软分叉是对原有共识的小修小改。


# 硬分叉真的很硬
如果说软分叉是对原有共识的小修小改，那么硬分叉就相当于推倒重来，大修大概。

矿工之间对于现有的共识产生了不同的看法，其中一拨人决定采用其他的共识机制，这样也会有分叉，而且这种分叉不会消失。软分叉是系统修bug，硬分叉就是我不跟你干了，我自己单干开发一个差不多的软件，也可以挖矿，也可以生产“虚拟币”。

如此看来，不论是软分叉还是硬分叉都以不同的方式修改了共识。不同的是，在进行软分叉后，新节点产生的交易和区块能被旧节点验证并接受，而硬分叉不行。

# 软硬分叉对持有者的影响
如果比特币发生软分叉，其实对于比特币持有者没有什么影响。如果比特币产生硬分叉，对于持有者来说相当于免费获得了额外的“资产”，至于这些“资产”到底是否适合长期持有以及是否有“价值”，这需要持有者自己去分析。

# ChangeLog
- 20180402 create
